apiVersion: v1
kind: ConfigMap
metadata:
  name: tiny-url-config
  namespace: tiny-url
data:
  DB_MAX_CONNS: "25"
  DB_MIN_CONNS: "5"
  DB_MAX_CONN_LIFETIME: "1h"
  DB_MAX_CONN_IDLE_TIME: "30m"

  REDIS_ADDR: "redis:6379"
  REDIS_DB: "0"
  REDIS_STREAM_NAME: "clicks:stream"

  CLICKHOUSE_ADDR: "clickhouse:9000"
  CLICKHOUSE_DATABASE: "analytics"
  CLICKHOUSE_USERNAME: "clickhouse"

  ANALYTICS_CONSUMER_GROUP: "analytics-group"
  CLICKHOUSE_MAX_CONNS: "10"

  URL_SERVICE_ADDR: "url-service:50051"
  USER_SERVICE_ADDR: "user-service:50052"

  API_GATEWAY_PORT: "8080"
  REDIRECT_SERVICE_PORT: "8081"

  BASE_URL: "https://tiny.link"

  CACHE_L1_CAPACITY: "10000"
  CACHE_L2_TTL: "1h"

  RATE_LIMIT_REQUESTS: "100"
  RATE_LIMIT_WINDOW: "1m"

  LOG_LEVEL: "INFO"
  LOG_COLORS: "false"

  SNOWFLAKE_DATACENTER_ID: "1"

  ANALYTICS_BATCH_SIZE: "100"
  ANALYTICS_POLL_INTERVAL: "1s"
  ANALYTICS_BLOCK_TIME: "5s"

  DEFAULT_URL_TTL: "72h"
